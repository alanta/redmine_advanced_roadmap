<%= tag "a", :name => l(:label_total) %>
<h3 class="icon22 icon22-package"><%= l(:label_total) %></h3>
<%= progress_bar([totals[:closed_pourcent], totals[:completed_pourcent]], :width => '40em', :legend => ('%0.0f%' % totals[:completed_pourcent])) %>
<fieldset><legend><%= l(:label_time_tracking) %></legend>
<table>
<tr>
  <td width="200px" align="right"><%= l(:field_estimated_hours) %></td>
  <td width="340px" class="total-hours"><%= l_hours(totals[:estimated_hours]) %></td>
</tr>
<% if User.current.allowed_to?(:view_time_entries, project) %>
  <tr>
    <td width="200px" align="right"><%= l(:label_spent_time) %></td>
    <td width="340px" class="total-hours"><%= l_hours(totals[:spent_hours]) %></td>
  </tr>
  <tr>
    <td width="200px" align="right"><%= l(:field_done_ratio) %></td>
    <td width="340px" class="total-hours"><big><%= "%.0f" % totals[:completed_pourcent] %></big>%</td>
  </tr>
  <tr>
    <td width="200px" align="right"><%= l(:label_roadmap_due_in, "") %></td>
    <td width="340px" class="total-hours"><%= "#{l_hours(totals[:rest_hours])} / #{l_days(totals[:rest_hours] / 8.0)} / #{l_weeks(totals[:rest_hours] / 40.0)}" %></td>
  </tr>
  <%- if !(custom_field = CustomField.find_by_id(Setting.plugin_advanced_roadmap["parallel_effort_custom_field"].to_i)).nil? and
         custom_field.field_format == "float" and totals[:parallel_rest_hours] != totals[:rest_hours] -%>
  <tr>
    <td width="200px" align="right"><%= l(:label_roadmap_due_in, "") %> (<%= custom_field.name %>)</td>
    <td width="340px" class="total-hours"><%= "#{l_hours(totals[:parallel_rest_hours])} / #{l_days(totals[:parallel_rest_hours] / 8.0)} / #{l_weeks(totals[:parallel_rest_hours] / 40.0)}" %></td>
  </tr>
  <%- end -%>
<% end %>
</table>
</fieldset>
